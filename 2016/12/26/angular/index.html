<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8" />
  
  <title>angular | 林楠的个人博客</title>
  <meta name="author" content="zero" />

  
  <meta name="description" content="以梦为马，越骑越傻" />
  

  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

  <meta property="og:title" content="angular" />
  <meta property="og:site_name" content="林楠的个人博客" />

  
  

  
    <meta property="og:image" content="undefined" />
  

  
  <link href="/css/images/favicon.ico" rel="icon" />
  

  <link rel="alternate" href="/atom.xml" title="林楠的个人博客" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  


  <!-- baidu webmaster push -->
  <script src='//push.zhanzhang.baidu.com/push.js'></script>

</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">林楠的个人博客</a></h1>
  <h2><a href="/"></a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">首页</a></li>
    
      <li><a href="/archives">归档</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-12-26T05:15:48.501Z"><a href="/2016/12/26/angular/">2016-12-26</a></time>
      
      
  
    <h1 class="title">angular</h1>
  

    </header>
    <div class="entry">
      
        <h2 id="一、框架-我们按照他的规范去写，人家调用我们（被动）（强约束）"><a href="#一、框架-我们按照他的规范去写，人家调用我们（被动）（强约束）" class="headerlink" title="一、框架 我们按照他的规范去写，人家调用我们（被动）（强约束）"></a>一、框架 我们按照他的规范去写，人家调用我们（被动）（强约束）</h2><p>angular的作用：处理数据，前后端分离框架（MVVM）,双向数据绑定,扩展标签的功能,模块化,单页开发。</p>
<h2 id="ng-app-html"><a href="#ng-app-html" class="headerlink" title="ng-app(html)"></a>ng-app(html)</h2><ul>
<li>启动angular程序，指定模块来启动，定义模块。调用run方法,产生$rootScope<br>run方法<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">app.run(function($rootScope)&#123;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="ng-model"><a href="#ng-model" class="headerlink" title="ng-model"></a>ng-model</h2><ul>
<li>只能放置变量，不能放运算</li>
<li>用于表单元素</li>
<li>如果作用域上没有，则声明</li>
<li>如果有取值放到输入框中</li>
<li>如果使用user.name 则会创建一个对象，将name变成一个变量存入进来</li>
<li>实现双向数据绑定的，当前作用域下没有变量，在当前作用域下声明，如果有变量，将name的值绑定给input标签，（数据影响视图）如果input中内容改变，会改变当前作用域上的（视图影响数据）</li>
</ul>
<h2 id="ng-bind"><a href="#ng-bind" class="headerlink" title="ng-bind"></a>ng-bind</h2><ul>
<li>和两个大括号作用域一样，两个大括号是ng-bind的简写，不会导致页面的闪烁</li>
<li>不能用于表单元素</li>
<li>原有的内容会被ng-bind绑定的值替换掉</li>
<li>1.支持简单的运算</li>
<li>2.支持三元运算符</li>
<li>3.支持赋值操作</li>
</ul>
<h2 id="ng-cloak"><a href="#ng-cloak" class="headerlink" title="ng-cloak"></a>ng-cloak</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[ng-cloak]&#123;</div><div class="line">    display:none</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>在所有闪烁的标签上增加ng-cloak属性</li>
</ul>
<h2 id="ng-repeat"><a href="#ng-repeat" class="headerlink" title="ng-repeat"></a>ng-repeat</h2><p>用途:循环遍历</p>
<ul>
<li>要循环谁就写在谁的身上</li>
<li>遍历数组 ng中增加的属性$index $odd $even $first $last $middle (根据索引来遍历)</li>
<li>通过(key,value)可以获得索引，默认写一个变量则是value</li>
<li>对象同数组</li>
</ul>
<h2 id="ng-repeat-为什么-track-by-index"><a href="#ng-repeat-为什么-track-by-index" class="headerlink" title="ng-repeat 为什么 track by $index"></a>ng-repeat 为什么 track by $index</h2><ul>
<li>如果value重复，不能通过相同的value去遍历，通过唯一项来进行遍历。只要是数组就加track by $index</li>
</ul>
<h2 id="ng-click"><a href="#ng-click" class="headerlink" title="ng-click"></a>ng-click</h2><ul>
<li>angular的事件 ng-click=”a()”</li>
</ul>
<h2 id="ng-show-ng-hide"><a href="#ng-show-ng-hide" class="headerlink" title="ng-show/ng-hide"></a>ng-show/ng-hide</h2><p>用途：控制元素的显示隐藏</p>
<ul>
<li>通过css样式进行隐藏，内部命令依然执行</li>
</ul>
<blockquote>
<p>频繁切换采用ng-show/ng-hide</p>
</blockquote>
<h2 id="ng-if"><a href="#ng-if" class="headerlink" title="ng-if"></a>ng-if</h2><p>用途：控制元素的显示隐藏</p>
<ul>
<li>通过删除dom达到隐藏效果，如果为false内部指令不再执行</li>
<li>会产生一个作用域，保留删掉的内容</li>
</ul>
<blockquote>
<p>一般和ng-repeat连用，如果数据不存在就移出掉dom<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;div ng-if=&quot;arrs.length&quot;&gt;</div><div class="line">    &lt;div ng-repeat=&quot;a in arrs&quot;&gt;&#123;&#123;a&#125;&#125;&lt;/div&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="ng-disabled"><a href="#ng-disabled" class="headerlink" title="ng-disabled"></a>ng-disabled</h2><p>用途:ng-disabled=”true” 进入禁用状态</p>
<h2 id="ng-readonly"><a href="#ng-readonly" class="headerlink" title="ng-readonly"></a>ng-readonly</h2><p>用途:ng-readonly=”true” 进入仅读状态</p>
<h2 id="作用域的产生"><a href="#作用域的产生" class="headerlink" title="作用域的产生"></a>作用域的产生</h2><p>产生作用域的方式</p>
<ul>
<li>ng-controller</li>
<li>ng-app</li>
<li>ng-transclude</li>
<li>scope:true scope:大括号</li>
<li>ng-if</li>
<li>ng-repeat ng-repeat=”a in arr”</li>
</ul>
<h2 id="创建模块"><a href="#创建模块" class="headerlink" title="创建模块"></a>创建模块</h2><pre><code>//1.模块的名字
//2.模块的依赖,如果没有依赖的模块增加一个空数组
//写数组的是创建，不写表示获取
var app = angular.module(&apos;appModule&apos;,[]);
//app代表的是当前的模块
//创建子作用域，防止污染全局变量
//创建控制器(会买一送一 送你一个作用域)
//1.控制器的名字
//2.控制器的定义
</code></pre><h2 id="数组的方式声明，防止压缩，数组的第一项对应函数的第一个参数"><a href="#数组的方式声明，防止压缩，数组的第一项对应函数的第一个参数" class="headerlink" title="数组的方式声明，防止压缩，数组的第一项对应函数的第一个参数"></a>数组的方式声明，防止压缩，数组的第一项对应函数的第一个参数</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">app.run([&apos;$rootScope&apos;,function (a) &#123;&#125;]);</div></pre></td></tr></table></figure>
<h2 id="二、控制器"><a href="#二、控制器" class="headerlink" title="二、控制器"></a>二、控制器</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">app.controller(&apos;myCtrl&apos;,function($scope)&#123;</div><div class="line">	$scope.name=&apos;zfpx&apos;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h2 id="ng-controller"><a href="#ng-controller" class="headerlink" title="ng-controller"></a>ng-controller</h2><p>用途:调度数据的，买一送一 送作用域</p>
<ul>
<li>不能操作dom，dom在link函数操作</li>
<li>管辖范围,和dom平齐</li>
<li>可以将带有ng-controller的标签嵌套，子继承父 父继承不了子</li>
<li>不能复用</li>
<li>调用ng-controller后可以执行控制器</li>
</ul>
<h2 id="三、指令（内置，自定义）可以复用，用指令封装成功能"><a href="#三、指令（内置，自定义）可以复用，用指令封装成功能" class="headerlink" title="三、指令（内置，自定义）可以复用，用指令封装成功能"></a>三、指令（内置，自定义）可以复用，用指令封装成功能</h2><ul>
<li>自定义：组件式和装饰型<ul>
<li>组件式:Element,看有没有template</li>
<li>装饰型:Attribute,一般没有模板 link函数<br>指令不依赖于控制器<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">&lt;zf-xxx&gt;&lt;/zf-xxx&gt;</div><div class="line">app.directive(&apos;zfXxx&apos;,function()&#123;</div><div class="line">	return &#123;</div><div class="line">    		restrict:&apos;EA&apos;, 限制使用范围</div><div class="line">    		template/templateUrl, 模板</div><div class="line">    		transclude:true,</div><div class="line">    		scope:true/&#123;@=&amp;&#125;/不写</div><div class="line">    		replace：true 替换</div><div class="line">    		link:function(scope,element,attrs)&#123;&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">template:`</div><div class="line">         &lt;div&gt;</div><div class="line">             &lt;div class=&quot;title&quot; ng-click=&quot;fn()&quot;&gt;&#123;&#123;t&#125;&#125;&lt;/div&gt;</div><div class="line">             &lt;div class=&quot;content&quot; ng-transclude ng-show=&quot;flag&quot; ng-click=&quot;say(&#123;title:t&#125;)&quot;&gt;&lt;/div&gt;</div><div class="line">         &lt;/div&gt;函数执行传递的参数是个对象</div><div class="line">            `</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h2 id="四、过滤器-内置，自定义"><a href="#四、过滤器-内置，自定义" class="headerlink" title="四、过滤器(内置，自定义)"></a>四、过滤器(内置，自定义)</h2><ul>
<li><p>用法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123;&#123;数据 | filterA | filterB&#125;&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>小写转换大写 uppercase lowercase</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123;&#123;&quot;abcdefg&quot;|uppercase|lowercase&#125;&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>处理数字 number:2 :2表示保留几位</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123;&#123;&quot;1000000000.2222&quot;|number:0&#125;&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>钱币过滤器 currency 多个参数用:隔开</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123;&#123;&apos;100.431&apos;|currency:&apos;€&apos;:1&#125;&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>日期过滤器 毫秒戳</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123;&#123;1481767222868 | date:&apos;yyyy年MM月dd日 hh:mm:ss&apos;&#125;&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>限制位数 limitTo</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123;&#123;&apos;abcd&apos;| limitTo:2&#125;&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>json过滤器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;pre&gt;&#123;&#123;aa|json:4&#125;&#125;&lt;/pre&gt; 四个空格</div></pre></td></tr></table></figure>
</li>
</ul>
<p>pre标签能让你输入内容的样式，在页面中原样显示</p>
<ul>
<li><p>ng中提供了 orderBy filter</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;input type=&quot;text&quot; placeholder=&quot;请输入查询的内容&quot; ng-model=&quot;query&quot; ng-model-options=&quot;&#123;debounce:500&#125;&quot;&gt;</div><div class="line">ng-model-options=&quot;&#123;debounce:500&#125;&quot; 是延迟500ms 刷新</div><div class="line">失去焦点时刷新&#123;updateOn:&apos;blur&apos;&#125;</div><div class="line">&lt;tr ng-repeat=&quot;a in score|orderBy:language:flag|filter:&#123;math:query,chinese:query&#125; track by $index&quot;&gt;</div><div class="line">orderBy:按照language排序 flag是false为正序 | filter: 按照数学和语文 你输入的值得并集查找</div></pre></td></tr></table></figure>
</li>
<li><p>自定义过滤器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">app.filter(&apos;jw&apos;,function () &#123;</div><div class="line">        //目的是通过参数和原有的数据，进行改变内容</div><div class="line">        return function (data,param1,param2) &#123;</div><div class="line">	//默认返回一个函数，在函数中返回结果则是过滤后的结果</div><div class="line">        //data是我们要格式化的数据 param1是：后第一个参数 param2是第二个：的参数</div><div class="line">        return param1+data+param2;</div><div class="line">        &#125;</div><div class="line">    &#125;);</div></pre></td></tr></table></figure>
</li>
<li><p>监控xxxx变量的变化，只要有变化执行对应的回调函数，将新值和旧值传入到回掉函数中</p>
<ul>
<li>ng-change和watch区别</li>
<li>1.ng-change只能加在输入框中，不能监听页面数据变化<br>$watch<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">app.controller(&apos;ctrl&apos;, function ($scope) &#123;</div><div class="line">        $scope.product = &#123;name: &apos;飞机&apos;, price: 15, express: 10, count: 1&#125;;</div><div class="line">        $scope.$watch(&apos;product.count&apos;, function (newValue) &#123;</div><div class="line">            $scope.product.express = newValue * $scope.product.price &gt;= 100 ? 0 : 10;</div><div class="line">        &#125;)</div><div class="line">    &#125;)</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<p>用$watch 监听count的变化，让新值乘以单价去判断</p>
<h2 id="五、双向数据绑定"><a href="#五、双向数据绑定" class="headerlink" title="五、双向数据绑定"></a>五、双向数据绑定</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">app.directive(&apos;zfModel&apos;,function () &#123;</div><div class="line">        return &#123;</div><div class="line">            link:function (scope,element,attrs) &#123;</div><div class="line">                //当用户输入时触发的事件(修改视图 导致数据变化)</div><div class="line">                element.on(&apos;input&apos;,function () &#123;</div><div class="line">                    //取当前zf-model对应的名字，给scope赋值</div><div class="line">                    scope[attrs[&apos;zfModel&apos;]] =  this.value;//数据改变，但是视图没有跟随刷新</div><div class="line">                    scope.$apply();</div><div class="line">                &#125;);</div><div class="line">                //如果数据变化input框内容会变化吗</div><div class="line">                //数据变化的时候，监听变化后的结果，赋予给input的value属性</div><div class="line">                //监听作用域上的值的变化</div><div class="line">                scope.$watch(attrs[&apos;zfModel&apos;],function (newVal,oldVal) &#123;</div><div class="line">                    element.val(newVal);</div><div class="line">                &#125;);</div><div class="line"></div><div class="line">                //注入</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;)</div></pre></td></tr></table></figure>
<ul>
<li>apply()<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">app.controller(&apos;ctrl&apos;,function ($scope,$interval,$timeout) &#123;</div><div class="line">        $scope.time = new Date().getTime();</div><div class="line">        //原生js改变数据是不会触发视图刷新的</div><div class="line">        setInterval(function () &#123;</div><div class="line">            $scope.time = new Date().getTime();</div><div class="line">            //每次修改后要通知angular来修改视图</div><div class="line">            $scope.$apply();//原生修改数据时使用,强制刷新视图</div><div class="line">        &#125;,1000);</div><div class="line"></div><div class="line">        var timer = $interval(function () &#123; //$interval是自带的，会触发视图的刷新 (服务)</div><div class="line">            $scope.time = new Date().getTime();</div><div class="line">            //$scope.$apply();</div><div class="line">            //$interval.cancel(timer);</div><div class="line">        &#125;,1000);</div><div class="line">    &#125;);</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="六、发布订阅模式-on-emit-broadcast"><a href="#六、发布订阅模式-on-emit-broadcast" class="headerlink" title="六、发布订阅模式 on emit broadcast"></a>六、发布订阅模式 on emit broadcast</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">&lt;div ng-controller=&quot;parentCtrl&quot;&gt;</div><div class="line">    总价 &lt;input type=&quot;text&quot; ng-model=&quot;total&quot; ng-change=&quot;fn()&quot;&gt;</div><div class="line">    &lt;div ng-controller=&quot;childCtrl&quot;&gt;</div><div class="line">        单价 30 &lt;br&gt;</div><div class="line">        数量 &lt;input type=&quot;text&quot; ng-model=&quot;count&quot;&gt;</div><div class="line">    &lt;/div&gt;</div><div class="line">&lt;/div&gt;</div><div class="line">&lt;script src=&quot;node_modules/angular/angular.js&quot;&gt;&lt;/script&gt;</div><div class="line">&lt;script&gt;</div><div class="line">    //数据交互的第一种方式$rootScope</div><div class="line">    //事件的交互 儿子告诉父亲$emit</div><div class="line">    var app = angular.module(&apos;appModule&apos;,[]);</div><div class="line">    app.controller(&apos;parentCtrl&apos;,function ($scope) &#123;</div><div class="line">        $scope.total = 30;</div><div class="line">        $scope.$on(&apos;老子要改数量&apos;,function (e,data) &#123;</div><div class="line">            //e是事件源，data代表的是听到的内容</div><div class="line">            $scope.total = data;</div><div class="line">        &#125;);</div><div class="line">        //代码执行到这里发话了</div><div class="line">        $scope.fn = function () &#123;</div><div class="line">            $scope.$broadcast(&apos;你还敢叫老子&apos;,$scope.total);</div><div class="line">        &#125;;</div><div class="line">    &#125;);</div><div class="line">    app.controller(&apos;childCtrl&apos;,function ($scope) &#123;</div><div class="line">        $scope.count = 1;</div><div class="line">        //监控数量的变化</div><div class="line">        $scope.$watch(&apos;count&apos;,function (newVal) &#123;</div><div class="line">            $scope.$emit(&apos;老子要改数量&apos;,newVal*30);//自己知道</div><div class="line">        &#125;);</div><div class="line">        $scope.$on(&apos;你还敢叫老子&apos;,function (e,data) &#123;</div><div class="line">            $scope.count = data/30;</div><div class="line">        &#125;);</div><div class="line">    &#125;);</div><div class="line">    //on方法负责监听</div><div class="line">    // broadcast需要向下广播（自己也能听到）</div><div class="line">    // 向上广播emit（自己也能听到）</div></pre></td></tr></table></figure>
<h2 id="七、服务"><a href="#七、服务" class="headerlink" title="七、服务"></a>七、服务</h2><ul>
<li>服务的目的：封装代码，util.js,写好后，可以在任意一个控制器中注入使用</li>
<li>服务：五种服务一种装饰</li>
<li><p>provider “factory” service value constant</p>
</li>
<li><p>服务的名字(provider一运行代码就会将后面的函数new一下，当注入到控制器中，此实例的$get就会默认调用，$get的返回值就是注入后的内容，唯一一个可以配置的服务)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">app.config(function (calcProvider) &#123;</div><div class="line">    calcProvider.currency = &apos;￥&apos;;</div><div class="line">&#125;)</div><div class="line">app.provider(&apos;calc&apos;, function () &#123;</div><div class="line">    this.currency = &apos;£&apos;;</div><div class="line">    this.$get = function () &#123;</div><div class="line">        var that = this;</div><div class="line">        return &#123;</div><div class="line">            //这里的this都是calc</div><div class="line">            //&apos;+&apos;:(a, b) =&gt; this.currency + (a + b),</div><div class="line">            //&apos;-&apos;:(a, b)=&gt; &#123;&#125;,</div><div class="line">            &apos;+&apos;: (a, b)=&gt; this.currency+(a + b)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
<li><p>factory中直接后面的函数就是$get,factory是通过provider衍生出来的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">app.factory(&apos;calc&apos;, function () &#123;</div><div class="line">        return &#123;</div><div class="line">            &apos;+&apos;: function (a, b) &#123;</div><div class="line">                return (a + b)</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">app.controller(&apos;myCtrl1&apos;, function ($timeout, calc) &#123;</div><div class="line">        console.log(calc[&quot;+&quot;](1, 2))</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
<li><p>service</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">app.service(&apos;calc&apos;, function () &#123;//就是$get方法</div><div class="line">////这个构造函数是factory返回对象的构造函数</div><div class="line">        this[&apos;+&apos;] = function (a, b) &#123;</div><div class="line">            return (a + b)</div><div class="line">        &#125;</div><div class="line">    &#125;);</div></pre></td></tr></table></figure>
</li>
<li><p>value同constant</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">app.value/constant(&apos;calc&apos;, &#123;////这个对象是factory返回后的对象</div><div class="line">        &apos;+&apos;: function (a, b) &#123;</div><div class="line">            return (a + b)</div><div class="line">        &#125;</div><div class="line">    &#125;);</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="与后台数据的交互"><a href="#与后台数据的交互" class="headerlink" title="与后台数据的交互"></a>与后台数据的交互</h2><ul>
<li><p>$http 是angular中的内置服务，提供了数据交互 get post jsonp</p>
</li>
<li><p>一、get</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">app.controller(&apos;myCtrl&apos;, function ($scope, $http,$interval) &#123;</div><div class="line">        $interval(function () &#123;</div><div class="line">            $http.get(&apos;/clock&apos;).then(function (res) &#123;</div><div class="line">                //res 把数据存放在res.data属性中</div><div class="line">                $scope.timer = res.data</div><div class="line">            &#125;)</div><div class="line">        &#125;,1000)</div><div class="line">    &#125;)</div></pre></td></tr></table></figure>
</li>
<li><p>二、post</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">app.controller(&apos;myCtrl&apos;, function ($scope, $http, $interval) &#123;</div><div class="line">        $interval(function () &#123;</div><div class="line">            $http.post(&apos;/post&apos;, &#123;name: &apos;zf&apos;, age: 8&#125;).then(function (res) &#123;</div><div class="line">                //res 把数据存放在res.data属性中</div><div class="line">                $scope.timer = res.data</div><div class="line">            &#125;)</div><div class="line">        &#125;, 1000)</div><div class="line">    &#125;)</div></pre></td></tr></table></figure>
</li>
<li><p>三、jsonp</p>
<ul>
<li>jsonp 跨域 通过script（没有域名的限制） img css获取的内容会默认转换成图片,前端设置一个全局的函数，告诉给后台函数的名字,后台返回一个字符串函数的执行里面放入想要的数据</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">function getData(data) &#123;console.log(data)&#125;</div><div class="line">var script = document.createElement(&apos;script&apos;);</div><div class="line">script.src = &apos;http://localhost:8080/jsonp?cb=getData&apos;;</div><div class="line">document.body.appendChild(script);</div></pre></td></tr></table></figure>
<ul>
<li>1.前端定义好getData，创建script通过src 传递getData这个名字</li>
<li>2.扔到body中</li>
<li><p>3.后台取出getData函数 getData(后台的数据);</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">angular_jsonp</div><div class="line">var app = angular.module(&apos;appModule&apos;,[]);</div><div class="line">    app.controller(&apos;myCtrl&apos;,function ($scope,$http) &#123;</div><div class="line">        //angular指定json 必须callback=JSON_CALLBACK写死</div><div class="line">        $http.jsonp(&apos;http://localhost:8080/jsonp?callback=JSON_CALLBACK&apos;).then(function (data) &#123;</div><div class="line">            console.log(data);</div><div class="line">        &#125;);</div><div class="line">   &#125;);</div></pre></td></tr></table></figure>
</li>
<li><p>四、表单</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">?username=123&amp;password=123</div><div class="line">post请求发送数据 username=123&amp;password=123 formdata</div><div class="line">后端想收到的时候格式化成json</div><div class="line">&lt;form method=&quot;post&quot; action=&quot;/user&quot; &gt;        //接收的是表单提交的数据 else if (pathname == &apos;/user&apos;)</div><div class="line">    用户名:&lt;input type=&quot;text&quot; name=&quot;username&quot;&gt; &lt;br&gt;</div><div class="line">    &lt;!--必须增加name属性--&gt;</div><div class="line">    密码:&lt;input type=&quot;text&quot; name=&quot;password&quot;&gt; &lt;br&gt;</div><div class="line">    &lt;button&gt;提交&lt;/button&gt;</div><div class="line">&lt;/form&gt;</div><div class="line">&lt;!--&#123;name:1,age:2&#125;--&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>node给我们提供的解析表单数据的一个模块</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">var querystring = require(&apos;querystring&apos;);</div><div class="line">var str = &apos;username!=123&amp;&amp;password!=456&apos;;</div><div class="line">//JSON.parse转对象  JSON.stringify转字符串</div><div class="line">var obj = querystring.parse(str,&apos;&amp;&amp;&apos;,&apos;!=&apos;);</div><div class="line">//默认通过&amp; = 进行解析</div><div class="line">//console.log(obj);</div><div class="line">console.log(querystring.stringify(obj,&apos;**&apos;,&apos;||&apos;));</div><div class="line">//第二个参数是字段分隔符 第三个参数是key value分隔符</div></pre></td></tr></table></figure>
</li>
<li><p>五、增删改查</p>
</li>
<li>angular-resource, 提供了restful的风格</li>
<li>要使用angular-resource这个模块,依赖的模块ngResource</li>
<li>ngResource模块只提供了一个$resource<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">var app = angular.module(&apos;appModule&apos;, [&apos;ngResource&apos;])</div><div class="line">app.factory(&apos;user&apos;, function ($resource) &#123;</div><div class="line">    return $resource(&apos;/user/:uid&apos;, null, &#123;</div><div class="line">        update: &#123;method: &apos;put&apos;&#125;</div><div class="line">    &#125;)</div><div class="line">&#125;);</div><div class="line">app.controller(&apos;myCtrl&apos;, function ($scope, $http, user) &#123;</div><div class="line">    //想封装(factory)一个对用户的增删改查的功能</div><div class="line">    //user.get(&#123;uid:1&#125;); //   /user/1   get  后台返回一个对象</div><div class="line">    //user.query()  /user get 后台返回一个数组</div><div class="line">    //user.save(&#123;name:1,age:2&#125;) /user post 请求体 后台返回需要增加的那一项</div><div class="line">    //user.remove(&#123;uid:1&#125;) /user/1   delete 后台返回一个&#123;&#125;</div><div class="line">    //user.update(&#123;uid:1&#125;,&#123;name:1,age:2&#125;) /user/1 put  请求体	后台返回修改好的那一项</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
</li>
</ul>

      
    </div>
    
    <footer>
        <div class="alignright">
          
          <a href='javascript:void(0)' class="share-link bdsharebuttonbox" data-cmd="more">分享</a>
        </div>
        
        
        <!-- partial('post/share') -->
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="搜索">
    <input type="hidden" name="q" value="site:yoursite.com">
  </form>
</div>

  

  
<div class="widget tag">
  <h3 class="title">最新文章</h3>
  <ul class="entry">
    
      <li>
        <a href="/2017/01/16/html+css3/">html5+css3</a>
      </li>
    
      <li>
        <a href="/2017/01/06/mongo/">mongodb</a>
      </li>
    
      <li>
        <a href="/2017/01/06/express/">express</a>
      </li>
    
      <li>
        <a href="/2016/12/30/react/">react</a>
      </li>
    
      <li>
        <a href="/2016/12/30/gulp/">gulp</a>
      </li>
    
  </ul>
</div>


  

  
</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  <p>
  
  &copy; 2017 zero
  
  All rights reserved.</p>
  <p>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></p>
</div>
<div class="clearfix"></div>

<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"1","bdMiniList":false,"bdPic":"","bdStyle":"2","bdSize":"16"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script></footer>
  <script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


<div id='bg'></div>
</body>
</html>